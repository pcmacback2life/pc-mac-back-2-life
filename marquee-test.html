<!doctype html>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Marquee Test</title>
<style>
  :root{--mh:150px;--gap:16px;--dur:40s}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
  .wrap{padding:24px}
  h1{margin:0 0 12px}
  .hint{color:#666;margin:0 0 16px;font-size:14px}
  .marquee{overflow:hidden;width:100%}
  .marquee__track{display:flex;gap:var(--gap);align-items:center;width:max-content;will-change:transform;animation:mar var(--dur) linear infinite}
  .marquee__item{flex:0 0 auto}
  .marquee__item img{height:var(--mh);display:block;border-radius:10px}
  @keyframes mar{to{transform:translateX(calc(var(--dist,50%)*-1))}}
</style>
<div class="wrap">
  <h1>Marquee Test</h1>
  <p class="hint">Auto-built from files in <code>/screenshots</code>.</p>
  <section class="marquee" aria-label="Screenshots">
    <div class="marquee__track">
      <a class="marquee__item" href="screenshots/screenshot4.jpg" target="_blank" rel="noopener"><img src="screenshots/screenshot4.jpg" alt=""></a>
      <a class="marquee__item" href="screenshots/screenshot9.jpg" target="_blank" rel="noopener"><img src="screenshots/screenshot9.jpg" alt=""></a>
      <a class="marquee__item" href="screenshots/screenshot2.jpeg" target="_blank" rel="noopener"><img src="screenshots/screenshot2.jpeg" alt=""></a>
      <a class="marquee__item" href="screenshots/screenshot5.jpeg" target="_blank" rel="noopener"><img src="screenshots/screenshot5.jpeg" alt=""></a>
      <a class="marquee__item" href="screenshots/screenshot1.png" target="_blank" rel="noopener"><img src="screenshots/screenshot1.png" alt=""></a>
      <a class="marquee__item" href="screenshots/screenshot10.png" target="_blank" rel="noopener"><img src="screenshots/screenshot10.png" alt=""></a>
      <a class="marquee__item" href="screenshots/screenshot11.png" target="_blank" rel="noopener"><img src="screenshots/screenshot11.png" alt=""></a>
      <a class="marquee__item" href="screenshots/screenshot12.png" target="_blank" rel="noopener"><img src="screenshots/screenshot12.png" alt=""></a>
      <a class="marquee__item" href="screenshots/screenshot3.png" target="_blank" rel="noopener"><img src="screenshots/screenshot3.png" alt=""></a>
      <a class="marquee__item" href="screenshots/screenshot6.png" target="_blank" rel="noopener"><img src="screenshots/screenshot6.png" alt=""></a>
      <a class="marquee__item" href="screenshots/screenshot7.png" target="_blank" rel="noopener"><img src="screenshots/screenshot7.png" alt=""></a>
      <a class="marquee__item" href="screenshots/screenshot8.png" target="_blank" rel="noopener"><img src="screenshots/screenshot8.png" alt=""></a>
    </div>
  </section>
</div>
<script>
document.addEventListener('DOMContentLoaded', ()=>{
  const t=document.querySelector('.marquee__track'); if(!t) return;
  const imgs=[...t.querySelectorAll('img')];
  Promise.all(imgs.map(img=>img.complete?Promise.resolve():new Promise(r=>{
    img.addEventListener('load',r,{once:true}); img.addEventListener('error',r,{once:true});
  }))).then(()=>{
    t.innerHTML += t.innerHTML; // seamless loop
    const gap=parseFloat(getComputedStyle(t).gap||'16');
    const kids=[...t.children]; const half=kids.slice(0,kids.length/2);
    const w=half.reduce((s,el)=>s+el.getBoundingClientRect().width+gap,0);
    t.style.setProperty('--dist', w+'px');
    const pxPerSec=120; const dur=Math.max(20,Math.round(w/pxPerSec));
    document.documentElement.style.setProperty('--dur', dur+'s');
  });
});
</script>
